import { useOptimistic } from "react";

export default function LikeButton({ postId, initialLikes }) {
  const [likes, addLike] = useOptimistic(initialLikes, (current, delta) => current + delta);

  async function handleLike() {
    addLike(1); // immediately updates UI

    try {
      await fetch(`/api/posts/${postId}/like`, { method: "POST" });
    } catch (e) {
      addLike(-1); // rollback if server fails
    }
  }

  return (
    <button onClick={handleLike}>
      ğŸ‘ Like ({likes})
    </button>
  );
}



// User clicks button

// addLike(1) updates UI instantly

// Server request runs asynchronously

// If it succeeds â†’ nothing else needed

// If it fails â†’ rollback using addLike(-1)
